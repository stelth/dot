---
- defaults:
    link:
      relink: true
      create: true
    package:
      install: true
      update: true
      clean: false

- clean:
    ~/:
      force: true
    ~/.config:
      recursive: true
      force: true
    ~/.bin:
      recursive: true
      force: true

- brew:
    - jesseduffield/lazygit/lazygit
    - luarocks
    - shellcheck
    - shfmt
    - go
    - ghq

- package:
    pip:
      installCmd: pip3 install --user
      listCmd: pip3 list --user
      updateCmd: pip3 freeze --local | grep -v '^-e' | cut -d = -f 1 | xargs -n1 pip3 install -U --user
      packages:
        - pynvim
        - yamllint
        - flake8
        - autopep8
        - vim-vint
    npm:
      installCmd: npm install --prefix node
      listCmd: npm list --prefix node
      updateCmd: npm update --prefix node
      packages:
        - npm
        - tree-sitter-cli
        - markdownlint-cli
    lua:
      installCmd: luarocks install --server=https://luarocks.org/dev
      listCmd: luarocks list
      update: false
      packages:
        - luaformatter

- shell:
    - [source update_utils.zsh && update_brew, Updating homebrew]
    - [source update_utils.zsh && update_nvim, Updating neovim]
    - [source update_utils.zsh && update_apt, Updating apt packages]

# neovim specific link
- link:
    ~/bin/nvim:
      if: '[ `uname` = Linux ]'
      path: nvim_bin/nvim.appimage
- link:
    ~/bin/nvim:
      if: '[ `uname` = Darwin ]'
      path: nvim_bin/nvim-osx64/bin/nvim

- link:
    ~/bin:
      path: bin/*
      glob: true
    ~/:
      path: home/*
      glob: true
      prefix: '.'
    ~/.config:
      path: config/*
      glob: true
